document.body.onkeydown=function(e){9===e.keyCode&&(document.body.classList.add("tab-user"),document.addEventListener("click",function(){document.body.classList.remove("tab-user")}))},document.removeEventListener("click",function(){document.body.classList.remove("tab-user")});var nav_toggle=document.getElementsByClassName("main-nav__toggle")[0],main_header=document.getElementsByClassName("main-header")[0],main_nav=document.getElementsByClassName("main-nav")[0];main_header.classList.remove("main-header--nojs"),main_nav.classList.remove("main-nav--nojs"),nav_toggle.addEventListener("click",function(){main_nav.classList.contains("main-nav--open")?(main_nav.classList.remove("main-nav--open"),main_nav.classList.add("main-nav--close"),main_header.classList.remove("main-header--open"),main_header.classList.add("main-header--close")):(main_nav.classList.remove("main-nav--close"),main_nav.classList.add("main-nav--open"),main_header.classList.remove("main-header--close"),main_header.classList.add("main-header--open"))});var slider_btns=document.getElementsByClassName("reviews__toggles")[0],slider_list=document.getElementsByClassName("slider__list")[0],reviews_wrapper=document.getElementsByClassName("reviews__wrapper")[0],rev_prev=document.getElementsByClassName("reviews__btn--prev")[0],rev_next=document.getElementsByClassName("reviews__btn--next")[0];function deselectAll(e){for(var t=0;t<e.children.length;t++)e.children[t].classList.remove("slider__btn--active")}slider_btns&&(slider_btns.onclick=function(e){var t=e.target;switch(t.dataset.slide){case"1":slider_list.style.transform="translateX(0)",deselectAll(this),t.classList.add("slider__btn--active");break;case"2":slider_list.style.transform="translateX(-"+reviews_wrapper.offsetWidth+"px)",deselectAll(this),t.classList.add("slider__btn--active");break;case"3":slider_list.style.transform="translateX(-"+2*reviews_wrapper.offsetWidth+"px)",deselectAll(this),t.classList.add("slider__btn--active")}}),slider_list&&$(".slider__list").swipe({swipeLeft:leftSwipeRev,swipeRight:rightSwipeRev,threshold:0});var swipe_count_rev=0;function leftSwipeRev(){swipe_count_rev<2&&(swipe_count_rev++,slider_list.style.transform="translateX(-"+swipe_count_rev*reviews_wrapper.offsetWidth+"px)",deselectAll(slider_btns),slider_btns.children[swipe_count_rev].classList.add("slider__btn--active"))}function rightSwipeRev(){swipe_count_rev>0&&(swipe_count_rev--,slider_list.style.transform="translateX(-"+swipe_count_rev*reviews_wrapper.offsetWidth+"px)",deselectAll(slider_btns),slider_btns.children[swipe_count_rev].classList.add("slider__btn--active"))}var slide_count=0;rev_next&&(rev_next.onclick=function(){slide_count<2&&(slide_count++,slider_list.style.transform="translateX(-"+slide_count*reviews_wrapper.offsetWidth+"px)")}),rev_prev&&(rev_prev.onclick=function(){slide_count>0&&(slide_count--,slider_list.style.transform="translateX(-"+slide_count*reviews_wrapper.offsetWidth+"px)")});var price_btns=document.getElementsByClassName("price__toggles")[0],price_list=document.getElementsByClassName("price__list")[0],price_wrapper=document.getElementsByClassName("price__wrapper")[0];price_btns&&(price_btns.onclick=function(e){var t=e.target;switch(t.dataset.slide){case"1":price_list.style.transform="translateX(0)",deselectAll(this),t.classList.add("slider__btn--active");break;case"2":price_list.style.transform="translateX(-30.9%)",deselectAll(this),t.classList.add("slider__btn--active");break;case"3":price_list.style.transform="translateX(-61.8%)",deselectAll(this),t.classList.add("slider__btn--active")}}),price_list&&$(".price__list").swipe({swipeLeft:leftSwipePrice,swipeRight:rightSwipePrice,threshold:0});var swipe_count_price=0;function leftSwipePrice(){swipe_count_price<2&&(swipe_count_price++,price_list.style.transform="translateX(-"+30.9*swipe_count_price+"%)",deselectAll(price_btns),price_btns.children[swipe_count_price].classList.add("slider__btn--active"))}function rightSwipePrice(){swipe_count_price>0&&(swipe_count_price--,price_list.style.transform="translateX(-"+30.9*swipe_count_price+"%)",deselectAll(price_btns),price_btns.children[swipe_count_price].classList.add("slider__btn--active"))}if(document.getElementById("YMapsID")){var myMap,myPlacemar;function init(){(myMap=new ymaps.Map("YMapsID",{center:[59.93628,30.321076],zoom:16,controls:[]})).behaviors.disable("scrollZoom"),myMap.controls.add("zoomControl",{float:"none"}),myMap.controls.add("fullscreenControl",{float:"right"}),myMap.controls.add("typeSelector",{float:"left"}),myMap.controls.get("typeSelector").options.set("size","small"),myPlacemark=new ymaps.Placemark([59.93628,30.321076],{hintContent:"PINK",balloonContent:"191186, Санкт-Петербург, Невский пр., д.20"},{iconLayout:"default#image",iconImageHref:"img/icon-map-marker.svg",iconImageSize:[36,36],iconImageOffset:[-10,-10]}),myMap.geoObjects.add(myPlacemark)}ymaps.ready(init)}var bright,satur,edit_img_box=document.getElementsByClassName("photo-editor__picture")[0],edit_img=document.getElementById("editor_img"),sliderCrop=document.getElementById("crop"),sliderSaturate=document.getElementById("saturate"),sliderBright=document.getElementById("bright"),transform_crop=1,crop_change=!1;if(edit_img){var crop_slide=new Slider({elem:sliderCrop,filter:"crop",max:500}),saturate_slide=new Slider({elem:sliderSaturate,filter:"saturate",max:200}),bright_slide=new Slider({elem:sliderBright,filter:"bright",max:200});function Filter(e,t,s){t=t,s=s,e.style.filter="brightness("+t+"%) saturate("+s+"%)"}function Bright(e,t){e.style.filter="brightness("+t+"%)",console.log("bright: "+t+"%")}function Saturate(e,t){e.style.filter="saturate("+t+"%)",console.log("saturate: "+t+"%")}function Crop(e,t){t=(t+100)/100,e.style.transform="scale("+t+") translate("+translateX+"px,"+translateY+"px)",transform_crop=t,console.log("crop "+t)}function deselectAllFilter(e){for(var t=0;t<e.children.length;t++)e.children[t].classList.remove("photo-editor__control--active")}document.addEventListener("crop",function(e){Crop(edit_img,e.detail.pos),e.detail.pos>0?(edit_img.addEventListener("mousedown",dragImage),edit_img.addEventListener("touchstart",dragImage)):(edit_img.removeEventListener("mousedown",dragImage),edit_img.removeEventListener("touchstart",dragImage)),console.log("filt: "+e.detail.filt_type+" slide: "+e.detail.pos)}),document.addEventListener("bright",function(e){Bright(edit_img,e.detail.pos),console.log("filt: "+e.detail.filt_type+" slide: "+e.detail.pos)}),document.addEventListener("saturate",function(e){Saturate(edit_img,e.detail.pos),console.log("filt: "+e.detail.filt_type+" slide: "+e.detail.pos)});var filter_control_list=document.getElementsByClassName("photo-editor__controls-list")[0];filter_control_list.onclick=function(e){var t=e.target;console.log(t.tagName),t.closest(".photo-editor__btn")&&(deselectAllFilter(this),t.closest(".photo-editor__control").classList.add("photo-editor__control--active")),t.closest(".photo-editor__btn--crop")?(edit_img.addEventListener("mousedown",dragImage),edit_img.addEventListener("touchstart",dragImage)):(edit_img.removeEventListener("mousedown",dragImage),edit_img.removeEventListener("touchstart",dragImage))};var btn_cancel=document.getElementById("btn_cancel");btn_cancel.onclick=function(){crop_slide.setValue(0),saturate_slide.setValue(100),bright_slide.setValue(100),edit_img.style.transform="translate(0, 0)",translateX=0,translateY=0};try{new CustomEvent("IE has CustomEvent, but doesn't support constructor")}catch(e){window.CustomEvent=function(e,t){var s;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},(s=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),s},CustomEvent.prototype=Object.create(window.Event.prototype)}function Slider(e){var t,s,n,i,o=e.elem,a=o.querySelector(".photo-editor__thumb"),r=e.max||100;function l(e,t){var s;o.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:{pos:(s=t,Math.round(s/i)),filt_type:e}}))}function c(s){!function(s){var i=s-n-t.left;i<0&&(i=0);var r=o.offsetWidth-a.offsetWidth;i>r&&(i=r),a.style.left=i/o.offsetWidth*100+"%",l(e.filter,i)}(s.clientX||s.touches[0].clientX)}function d(){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",d)}o.ondragstart=function(){return!1},o.ontouchstart=o.onmousedown=function(e){if(console.log(e.target.className),e.target.classList.contains("photo-editor__thumb")){var l=e.clientX||e.touches[0].clientX;e.clientY||e.touches[0].clientY;return i=(o.offsetWidth-a.offsetWidth)/r,console.log("pixelsPerValue "+i),m=l,s=a.getBoundingClientRect(),t=o.getBoundingClientRect(),n=m-s.left,document.addEventListener("mousemove",c),document.addEventListener("mouseup",d),document.addEventListener("touchmove",c),document.addEventListener("touchend",d),!1}var m},this.setValue=function(t){var s=i*t;a.style.left=s/o.offsetWidth*100+"%",l(e.filter,s)}}var translateX=0,translateY=0;function dragImage(e){var t,s,n=e.clientX||e.touches[0].clientX,i=e.clientY||e.touches[0].clientY;document.ontouchmove=document.onmousemove=function(e){var o=e.clientX||e.touches[0].clientX,a=e.clientY||e.touches[0].clientY;t=translateX+o-n,s=translateY+a-i,edit_img.style.transform="scale("+transform_crop+") translate("+t+"px,"+s+"px)"},document.ontouchend=document.onmouseup=function(){translateX=t,translateY=s,document.onmousemove=document.onmouseup=null,document.ontouchmove=document.ontouchend=null},e.preventDefault()}function getCoords(e){var t=e.getBoundingClientRect();return{top:t.top+pageYOffset,left:t.left+pageXOffset}}edit_img.ondragstart=function(){return!1}}var pop_sucs=document.getElementById("popup_success"),pop_err=document.getElementById("popup_error"),form_contest=document.getElementsByClassName("questionnaire__form")[0],first_name=document.getElementById("first_name"),second_name=document.getElementById("surname"),email=document.getElementById("mail"),storage_name=localStorage.getItem("first_name"),storage_second_name=localStorage.getItem("second_name"),storage_email=localStorage.getItem("email");if(form_contest){function showPopup(e,t){e.classList.remove("popup--close"),e.classList.add("popup--open"),e.getElementsByClassName("popup__btn")[0].onclick=function(){e.classList.contains("popup--success")&&t.submit(),closePopup(e)},document.onkeydown=function(t){27===t.keyCode&&closePopup(e)}}function closePopup(e){e.classList.remove("popup--open"),e.classList.add("popup--close")}storage_name&&(first_name.value=storage_name),storage_second_name&&(second_name.value=storage_second_name),storage_email&&(email.value=storage_email),form_contest.addEventListener("submit",function(e){""==first_name.value||""==second_name.value||""==email.value?(showPopup(pop_err),e.preventDefault()):(showPopup(pop_sucs,form_contest),localStorage.setItem("first_name",first_name.value),localStorage.setItem("second_name",second_name.value),localStorage.setItem("email",email.value),e.preventDefault())})}